;(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){var global=typeof self!=="undefined"?self:typeof window!=="undefined"?window:{};var Base64Url=require('./lib/base64_url');var assert_required=require('./lib/assert_required');var is_array=require('./lib/is-array');var index_of=require('./lib/index-of');var qs=require('qs');var xtend=require('xtend');var trim=require('trim');var reqwest=require('reqwest');var WinChan=require('winchan');var jsonp=require('jsonp');var jsonpOpts={param:'cbx',timeout:8000,prefix:'__auth0jp'};var same_origin=require('./lib/same-origin');var json_parse=require('./lib/json-parse');var LoginError=require('./lib/LoginError');var use_jsonp=require('./lib/use_jsonp');function isInternetExplorer(){var rv=-1;var ua=navigator.userAgent;var re;if(navigator.appName==='Microsoft Internet Explorer'){re=new RegExp('MSIE ([0-9]{1,}[\.0-9]{0,})');if(re.exec(ua)!=null){rv=parseFloat(RegExp.$1);}}else if(ua.indexOf('Trident')>-1){re=new RegExp('rv:([0-9]{2,2}[\.0-9]{0,})');if(re.exec(ua)!==null){rv=parseFloat(RegExp.$1);}}return rv;}function stringifyPopupSettings(popupOptions){var settings='';for(var key in popupOptions){settings+=key+'='+popupOptions[key]+',';}return settings.slice(0,-1);}function checkIfSet(obj,key){return!!(obj&&obj[key]!=null);}function handleRequestError(err,callback){var er=err;var isAffectedIEVersion=isInternetExplorer()===10||isInternetExplorer()===11;var zeroStatus=(!er.status||er.status===0);var onLine=!!window.navigator.onLine;if(zeroStatus&&!onLine){er={};er.status=0;er.responseText={code:'offline'};}else if(zeroStatus&&isAffectedIEVersion){er={};er.status=401;er.responseText={code:'invalid_user_password'};}else if(zeroStatus){er={};er.status=0;er.responseText={code:'connection_refused_timeout'};}else{er.responseText=err;}var error=new LoginError(er.status,er.responseText);callback(error);}function joinUrl(protocol,domain,endpoint){return protocol+'//'+domain+endpoint;}function Auth0(options){if(!(this instanceof Auth0)){return new Auth0(options);}assert_required(options,'clientID');assert_required(options,'domain');this._useJSONP=null!=options.forceJSONP?!!options.forceJSONP:use_jsonp()&&!same_origin('https:',options.domain);this._clientID=options.clientID;this._callbackURL=options.callbackURL||document.location.href;this._shouldRedirect=!!options.callbackURL;this._domain=options.domain;this._callbackOnLocationHash=false||options.callbackOnLocationHash;this._cordovaSocialPlugins={facebook:this._phonegapFacebookLogin};this._useCordovaSocialPlugins=false||options.useCordovaSocialPlugins;this._sendClientInfo=null!=options.sendSDKClientInfo?options.sendSDKClientInfo:true;}Auth0.version=require('./version.json').version;Auth0.clientInfo={name:'auth0.js',version:Auth0.version};Auth0.prototype._redirect=function(url){global.window.location=url;};Auth0.prototype._getCallbackOnLocationHash=function(options){return(options&&typeof options.callbackOnLocationHash!=='undefined')?options.callbackOnLocationHash:this._callbackOnLocationHash;};Auth0.prototype._getCallbackURL=function(options){return(options&&typeof options.callbackURL!=='undefined')?options.callbackURL:this._callbackURL;};Auth0.prototype._getClientInfoString=function(){var clientInfo=JSON.stringify(Auth0.clientInfo);return Base64Url.encode(clientInfo);};Auth0.prototype._getClientInfoHeader=function(){return{'Auth0-Client':this._getClientInfoString()};};Auth0.prototype._renderAndSubmitWSFedForm=function(options,formHtml){var div=document.createElement('div');div.innerHTML=formHtml;var form=document.body.appendChild(div).children[0];if(options.popup&&!this._getCallbackOnLocationHash(options)){form.target='auth0_signup_popup';}form.submit();};Auth0.prototype._getMode=function(options){return{scope:'openid',response_type:this._getCallbackOnLocationHash(options)?'token':'code'};};Auth0.prototype._configureOfflineMode=function(options){if(options.scope&&options.scope.indexOf('offline_access')>=0){options.device=options.device||'Browser';}};Auth0.prototype._getUserInfo=function(profile,id_token,callback){if(!(profile&&!profile.user_id)){return callback(null,profile);}var _this=this;var protocol='https:';var domain=this._domain;var endpoint='/tokeninfo';var url=joinUrl(protocol,domain,endpoint);var fail=function(status,description){var error=new Error(status+': '+(description||''));error.error=status;error.error_description=description;callback(error);};if(this._useJSONP){return jsonp(url+'?'+qs.stringify({id_token:id_token}),jsonpOpts,function(err,resp){if(err){return fail(0,err.toString());}return resp.status===200?callback(null,resp.user):fail(resp.status,resp.err||resp.error);});}return reqwest({url:same_origin(protocol,domain)?endpoint:url,method:'post',type:'json',crossOrigin:!same_origin(protocol,domain),data:{id_token:id_token}}).fail(function(err){fail(err.status,err.responseText);}).then(function(userinfo){callback(null,userinfo);});};Auth0.prototype.getProfile=function(id_token,callback){if('function'!==typeof callback){throw new Error('A callback function is required');}if(!id_token||typeof id_token!=='string'){return callback(new Error('Invalid token'));}this._getUserInfo(this.decodeJwt(id_token),id_token,callback);};Auth0.prototype.validateUser=function(options,callback){var protocol='https:';var domain=this._domain;var endpoint='/public/api/users/validate_userpassword';var url=joinUrl(protocol,domain,endpoint);var query=xtend(options,{client_id:this._clientID,username:trim(options.username||options.email||'')});if(this._useJSONP){return jsonp(url+'?'+qs.stringify(query),jsonpOpts,function(err,resp){if(err){return callback(err);}if('error'in resp&&resp.status!==404){return callback(new Error(resp.error));}callback(null,resp.status===200);});}reqwest({url:same_origin(protocol,domain)?endpoint:url,method:'post',type:'text',data:query,crossOrigin:!same_origin(protocol,domain),error:function(err){if(err.status!==404){return callback(new Error(err.responseText));}callback(null,false);},success:function(resp){callback(null,resp.status===200);}});};Auth0.prototype.decodeJwt=function(jwt){var encoded=jwt&&jwt.split('.')[1];return json_parse(Base64Url.decode(encoded));};Auth0.prototype.parseHash=function(hash){hash=hash||window.location.hash;var parsed_qs;if(hash.match(/error/)){hash=hash.substr(1).replace(/^\//,'');parsed_qs=qs.parse(hash);var err={error:parsed_qs.error,error_description:parsed_qs.error_description};return err;}if(!hash.match(/access_token/)){return null;}hash=hash.substr(1).replace(/^\//,'');parsed_qs=qs.parse(hash);var id_token=parsed_qs.id_token;var refresh_token=parsed_qs.refresh_token;var prof=this.decodeJwt(id_token);var invalidJwt=function(error){var err={error:'invalid_token',error_description:error};return err;};var audiences=is_array(prof.aud)?prof.aud:[prof.aud];if(index_of(audiences,this._clientID)===-1){return invalidJwt('The clientID configured ('+this._clientID+') does not match with the clientID set in the token ('+audiences.join(', ')+').');}if(prof.iss&&prof.iss!=='https://'+this._domain+'/'){return invalidJwt('The domain configured (https://'+this._domain+'/) does not match with the domain set in the token ('+prof.iss+').');}return{profile:prof,id_token:id_token,access_token:parsed_qs.access_token,state:parsed_qs.state,refresh_token:refresh_token};};Auth0.prototype.signup=function(options,callback){var _this=this;var opts={client_id:this._clientID,redirect_uri:this._getCallbackURL(options),username:trim(options.username||''),email:trim(options.email||options.username||''),tenant:this._domain.split('.')[0]};var query=xtend(this._getMode(options),options,opts);this._configureOfflineMode(query);if(!checkIfSet(options,'sso')){options.sso=true;}if(!checkIfSet(options,'auto_login')){options.auto_login=true;}var popup;var will_popup=options.auto_login&&options.popup&&(!this._getCallbackOnLocationHash(options)||options.sso);if(will_popup){popup=this._buildPopupWindow(options);}function success(){if(options.auto_login){return _this.login(options,callback);}if('function'===typeof callback){return callback();}}function fail(status,resp){var error=new LoginError(status,resp);if(popup&&'function'===typeof popup.kill){popup.kill();}if('function'===typeof callback){return callback(error);}throw error;}var protocol='https:';var domain=this._domain;var endpoint='/dbconnections/signup';var url=joinUrl(protocol,domain,endpoint);if(this._useJSONP){return jsonp(url+'?'+qs.stringify(query),jsonpOpts,function(err,resp){if(err){return fail(0,err);}return resp.status==200?success():fail(resp.status,resp.err||resp.error);});}reqwest({url:same_origin(protocol,domain)?endpoint:url,method:'post',type:'html',data:query,success:success,crossOrigin:!same_origin(protocol,domain),error:function(err){fail(err.status,err.responseText);}});};Auth0.prototype.changePassword=function(options,callback){var query={tenant:this._domain.split('.')[0],client_id:this._clientID,connection:options.connection,username:trim(options.username||''),email:trim(options.email||options.username||''),password:options.password};function fail(status,resp){var error=new LoginError(status,resp);if(callback){return callback(error);}}var protocol='https:';var domain=this._domain;var endpoint='/dbconnections/change_password';var url=joinUrl(protocol,domain,endpoint);if(this._useJSONP){return jsonp(url+'?'+qs.stringify(query),jsonpOpts,function(err,resp){if(err){return fail(0,err);}return resp.status==200?callback(null,resp.message):fail(resp.status,resp.err||resp.error);});}reqwest({url:same_origin(protocol,domain)?endpoint:url,method:'post',type:'html',data:query,crossOrigin:!same_origin(protocol,domain),error:function(err){fail(err.status,err.responseText);},success:function(r){callback(null,r);}});};Auth0.prototype._buildAuthorizeQueryString=function(args,blacklist){var query=this._buildAuthorizationParameters(args,blacklist);return qs.stringify(query);};Auth0.prototype._buildAuthorizationParameters=function(args,blacklist){var query=xtend.apply(null,args);this._configureOfflineMode(query);if(this._sendClientInfo)query['auth0Client']=this._getClientInfoString();blacklist=blacklist||['popup','popupOptions'];var i,key;for(i=0;i<blacklist.length;i++){key=blacklist[i];delete query[key];}if(query.connection_scope&&is_array(query.connection_scope)){query.connection_scope=query.connection_scope.join(',');}return query;};Auth0.prototype.login=Auth0.prototype.signin=function(options,callback){if(!checkIfSet(options,'sso')){options.sso=true;}if(typeof options.passcode!=='undefined'){return this.loginWithPasscode(options,callback);}if(typeof options.username!=='undefined'||typeof options.email!=='undefined'){return this.loginWithUsernamePassword(options,callback);}if(!!window.cordova){return this.loginPhonegap(options,callback);}if(!!options.popup&&this._getCallbackOnLocationHash(options)){return this.loginWithPopup(options,callback);}this._authorize(options);};Auth0.prototype._authorize=function(options){var qs=[this._getMode(options),options,{client_id:this._clientID,redirect_uri:this._getCallbackURL(options)}];var query=this._buildAuthorizeQueryString(qs);var url=joinUrl('https:',this._domain,'/authorize?'+query);if(options.popup){this._buildPopupWindow(options,url);}else{this._redirect(url);}};Auth0.prototype._computePopupPosition=function(options){options=options||{};var width=options.width||500;var height=options.height||600;var screenX=typeof window.screenX!=='undefined'?window.screenX:window.screenLeft;var screenY=typeof window.screenY!=='undefined'?window.screenY:window.screenTop;var outerWidth=typeof window.outerWidth!=='undefined'?window.outerWidth:document.body.clientWidth;var outerHeight=typeof window.outerHeight!=='undefined'?window.outerHeight:(document.body.clientHeight-22);var left=screenX+(outerWidth-width)/2;var top=screenY+(outerHeight-height)/2;return{width:width,height:height,left:left,top:top};};Auth0.prototype.loginPhonegap=function(options,callback){if(this._shouldAuthenticateWithCordovaPlugin(options.connection)){this._socialPhonegapLogin(options,callback);return;}var mobileCallbackURL=joinUrl('https:',this._domain,'/mobile');var _this=this;var qs=[this._getMode(options),options,{client_id:this._clientID,redirect_uri:mobileCallbackURL}];if(this._sendClientInfo){qs.push({auth0Client:this._getClientInfoString()});}var query=this._buildAuthorizeQueryString(qs);var popupUrl=joinUrl('https:',this._domain,'/authorize?'+query);var popupOptions=xtend({location:'yes'},options.popupOptions);delete popupOptions.width;delete popupOptions.height;var ref=window.open(popupUrl,'_blank',stringifyPopupSettings(popupOptions));var answered=false;function errorHandler(event){if(answered){return;}callback(new Error(event.message),null,null,null,null);answered=true;return ref.close();}function startHandler(event){if(answered){return;}if(event.url&&!(event.url.indexOf(mobileCallbackURL+'#')===0||event.url.indexOf(mobileCallbackURL+'?')===0)){return;}var result=_this.parseHash(event.url.slice(mobileCallbackURL.length));if(!result){callback(new Error('Error parsing hash'),null,null,null,null);answered=true;return ref.close();}if(result.id_token){_this.getProfile(result.id_token,function(err,profile){callback(err,profile,result.id_token,result.access_token,result.state,result.refresh_token);});answered=true;return ref.close();}callback(new Error(result.err||result.error||'Something went wrong'),null,null,null,null);answered=true;return ref.close();}function exitHandler(){if(answered){return;}callback(new Error('Browser window closed'),null,null,null,null);ref.removeEventListener('loaderror',errorHandler);ref.removeEventListener('loadstart',startHandler);ref.removeEventListener('exit',exitHandler);}ref.addEventListener('loaderror',errorHandler);ref.addEventListener('loadstart',startHandler);ref.addEventListener('exit',exitHandler);};Auth0.prototype.loginWithPopup=function(options,callback){var _this=this;if(!callback){throw new Error('popup mode should receive a mandatory callback');}var qs=[this._getMode(options),options,{client_id:this._clientID,owp:true}];if(this._sendClientInfo){qs.push({auth0Client:this._getClientInfoString()});}var query=this._buildAuthorizeQueryString(qs);var popupUrl=joinUrl('https:',this._domain,'/authorize?'+query);var popupPosition=this._computePopupPosition(options.popupOptions);var popupOptions=xtend(popupPosition,options.popupOptions);var popup=WinChan.open({url:popupUrl,relay_url:'https://'+this._domain+'/relay.html',window_features:stringifyPopupSettings(popupOptions)},function(err,result){_this._current_popup=null;if(err){return callback(new LoginError(err),null,null,null,null,null);}if(!result){return callback(new LoginError('Something went wrong'),null,null,null,null,null);}if(result.id_token){return _this.getProfile(result.id_token,function(err,profile){callback(err,profile,result.id_token,result.access_token,result.state,result.refresh_token);});}if(result.err){return callback(new LoginError(result.err.status,result.err.details||result.err),null,null,null,null,null);}if(result.error){return callback(new LoginError(result.status,result.details||result),null,null,null,null,null);}return callback(new LoginError('Something went wrong'),null,null,null,null,null);});popup.focus();};Auth0.prototype._shouldAuthenticateWithCordovaPlugin=function(connection){var socialPlugin=this._cordovaSocialPlugins[connection];return this._useCordovaSocialPlugins&&!!socialPlugin;};Auth0.prototype._socialPhonegapLogin=function(options,callback){var socialAuthentication=this._cordovaSocialPlugins[options.connection];var _this=this;socialAuthentication(options.connection_scope,function(error,accessToken,extras){if(error){callback(error,null,null,null,null);return;}var loginOptions=xtend({access_token:accessToken},options,extras);_this.loginWithSocialAccessToken(loginOptions,callback);});};Auth0.prototype._phonegapFacebookLogin=function(scopes,callback){if(!window.facebookConnectPlugin||!window.facebookConnectPlugin.login){callback(new Error('missing plugin phonegap-facebook-plugin'),null,null);return;}var fbScopes;if(scopes&&is_array(scopes)){fbScopes=scopes;}else if(scopes){fbScopes=[scopes];}else{fbScopes=['public_profile'];}window.facebookConnectPlugin.login(fbScopes,function(state){callback(null,state.authResponse.accessToken,{});},function(error){callback(new Error(error),null,null);});};Auth0.prototype.loginWithUsernamePasswordAndSSO=function(options,callback){var _this=this;var popupPosition=this._computePopupPosition(options.popupOptions);var popupOptions=xtend(popupPosition,options.popupOptions);var popup=WinChan.open({url:'https://'+this._domain+'/sso_dbconnection_popup/'+this._clientID,relay_url:'https://'+this._domain+'/relay.html',window_features:stringifyPopupSettings(popupOptions),popup:this._current_popup,params:{domain:this._domain,clientID:this._clientID,options:{username:options.username,password:options.password,connection:options.connection,state:options.state,scope:options.scope}}},function(err,result){_this._current_popup=null;if(err){return callback(new LoginError(err),null,null,null,null,null);}if(!result){return callback(new LoginError('Something went wrong'),null,null,null,null,null);}if(result.id_token){return _this.getProfile(result.id_token,function(err,profile){callback(err,profile,result.id_token,result.access_token,result.state,result.refresh_token);});}if(result.err){return callback(new LoginError(result.err.status,result.err.details||result.err),null,null,null,null,null);}if(result.error){return callback(new LoginError(result.status,result.details||result),null,null,null,null,null);}return callback(new LoginError('Something went wrong'),null,null,null,null,null);});popup.focus();};Auth0.prototype.loginWithResourceOwner=function(options,callback){var _this=this;var query=xtend(this._getMode(options),options,{client_id:this._clientID,username:trim(options.username||options.email||''),grant_type:'password'});this._configureOfflineMode(query);var protocol='https:';var domain=this._domain;var endpoint='/oauth/ro';var url=joinUrl(protocol,domain,endpoint);if(this._sendClientInfo&&this._useJSONP){query['auth0Client']=this._getClientInfoString();}function enrichGetProfile(resp,callback){_this.getProfile(resp.id_token,function(err,profile){callback(err,profile,resp.id_token,resp.access_token,resp.state,resp.refresh_token);});}if(this._useJSONP){return jsonp(url+'?'+qs.stringify(query),jsonpOpts,function(err,resp){if(err){return callback(err);}if('error'in resp){var error=new LoginError(resp.status,resp.error);return callback(error);}enrichGetProfile(resp,callback);});}reqwest({url:same_origin(protocol,domain)?endpoint:url,method:'post',type:'json',data:query,headers:this._getClientInfoHeader(),crossOrigin:!same_origin(protocol,domain),success:function(resp){enrichGetProfile(resp,callback);},error:function(err){handleRequestError(err,callback);}});};Auth0.prototype.loginWithSocialAccessToken=function(options,callback){var _this=this;var query=this._buildAuthorizationParameters([{scope:'openid'},options,{client_id:this._clientID}]);var protocol='https:';var domain=this._domain;var endpoint='/oauth/access_token';var url=joinUrl(protocol,domain,endpoint);function enrichGetProfile(resp,callback){_this.getProfile(resp.id_token,function(err,profile){callback(err,profile,resp.id_token,resp.access_token,resp.state,resp.refresh_token);});}if(this._useJSONP){return jsonp(url+'?'+qs.stringify(query),jsonpOpts,function(err,resp){if(err){return callback(err);}if('error'in resp){var error=new LoginError(resp.status,resp.error);return callback(error);}enrichGetProfile(resp,callback);});}reqwest({url:same_origin(protocol,domain)?endpoint:url,method:'post',type:'json',data:query,headers:this._getClientInfoHeader(),crossOrigin:!same_origin(protocol,domain),success:function(resp){enrichGetProfile(resp,callback);},error:function(err){handleRequestError(err,callback);}});};Auth0.prototype._buildPopupWindow=function(options,url){if(this._current_popup&&!this._current_popup.closed){return this._current_popup;}url=url||'about:blank'
var _this=this;var defaults={width:500,height:600};var opts=xtend(defaults,options.popupOptions||{});var popupOptions=stringifyPopupSettings(opts);this._current_popup=window.open(url,'auth0_signup_popup',popupOptions);if(!this._current_popup){throw new Error('Popup window cannot not been created. Disable popup blocker or make sure to call Auth0 login or singup on an UI event.');}this._current_popup.kill=function(){this.close();_this._current_popup=null;};return this._current_popup;};Auth0.prototype.loginWithUsernamePassword=function(options,callback){if(callback&&callback.length>1&&(!options.sso||window.cordova)){return this.loginWithResourceOwner(options,callback);}var _this=this;var popup;if(options.popup&&!this._getCallbackOnLocationHash(options)){popup=this._buildPopupWindow(options);}if(callback&&callback.length>1&&options.sso){return this.loginWithUsernamePasswordAndSSO(options,callback);}var query=xtend(this._getMode(options),options,{client_id:this._clientID,redirect_uri:this._getCallbackURL(options),username:trim(options.username||options.email||''),tenant:this._domain.split('.')[0]});this._configureOfflineMode(query);var protocol='https:';var domain=this._domain;var endpoint='/usernamepassword/login';var url=joinUrl(protocol,domain,endpoint);if(this._useJSONP){return jsonp(url+'?'+qs.stringify(query),jsonpOpts,function(err,resp){if(err){if(popup&&popup.kill){popup.kill();}return callback(err);}if('error'in resp){if(popup&&popup.kill){popup.kill();}var error=new LoginError(resp.status,resp.error);return callback(error);}_this._renderAndSubmitWSFedForm(options,resp.form);});}function return_error(error){if(callback){return callback(error);}throw error;}reqwest({url:same_origin(protocol,domain)?endpoint:url,method:'post',type:'html',data:query,headers:this._getClientInfoHeader(),crossOrigin:!same_origin(protocol,domain),success:function(resp){_this._renderAndSubmitWSFedForm(options,resp);},error:function(err){if(popup&&popup.kill){popup.kill();}handleRequestError(err,return_error);}});};Auth0.prototype.loginWithPasscode=function(options,callback){if(options.email==null&&options.phoneNumber==null){throw new Error('email or phoneNumber is required for authentication');}if(options.passcode==null){throw new Error('passcode is required for authentication');}options.connection=options.email==null?'sms':'email';if(!this._shouldRedirect){options=xtend(options,{username:options.email==null?options.phoneNumber:options.email,password:options.passcode,sso:false});delete options.email;delete options.phoneNumber;delete options.passcode;return this.loginWithResourceOwner(options,callback);}var verifyOptions={connection:options.connection};if(options.phoneNumber){options.phone_number=options.phoneNumber;delete options.phoneNumber;verifyOptions.phone_number=options.phone_number;}if(options.email){verifyOptions.email=options.email;}options.verification_code=options.passcode;delete options.passcode;verifyOptions.verification_code=options.verification_code;var _this=this;this._verify(verifyOptions,function(error){if(error){return callback(error);}_this._verify_redirect(options);});};Auth0.prototype._verify=function(options,callback){var protocol='https:';var domain=this._domain;var endpoint='/passwordless/verify';var url=joinUrl(protocol,domain,endpoint);var data=options;if(this._useJSONP){if(this._sendClientInfo){data['auth0Client']=this._getClientInfoString();}return jsonp(url+'?'+qs.stringify(data),jsonpOpts,function(err,resp){if(err){return callback(new Error(0+': '+err.toString()));}return resp.status===200?callback(null,true):callback({status:resp.status});});}return reqwest({url:same_origin(protocol,domain)?endpoint:url,method:'post',headers:this._getClientInfoHeader(),crossOrigin:!same_origin(protocol,domain),data:data}).fail(function(err){try{callback(JSON.parse(err.responseText));}catch(e){var error=new Error(err.status+'('+err.statusText+'): '+err.responseText);error.statusCode=err.status;error.error=err.statusText;error.message=err.responseText;callback(error);}}).then(function(result){callback(null,result);});}
Auth0.prototype._verify_redirect=function(options){var qs=[this._getMode(options),options,{client_id:this._clientID,redirect_uri:this._getCallbackURL(options)}];var query=this._buildAuthorizeQueryString(qs);var url=joinUrl('https:',this._domain,'/passwordless/verify_redirect?'+query);this._redirect(url);};Auth0.prototype.renewIdToken=function(id_token,callback){this.getDelegationToken({id_token:id_token,scope:'passthrough',api:'auth0'},callback);};Auth0.prototype.refreshToken=function(refresh_token,callback){this.getDelegationToken({refresh_token:refresh_token,scope:'passthrough',api:'auth0'},callback);};Auth0.prototype.getDelegationToken=function(options,callback){options=options||{};if(!options.id_token&&!options.refresh_token){throw new Error('You must send either an id_token or a refresh_token to get a delegation token.');}var query=xtend({grant_type:'urn:ietf:params:oauth:grant-type:jwt-bearer',client_id:this._clientID,target:options.targetClientId||this._clientID,api_type:options.api},options);delete query.hasOwnProperty;delete query.targetClientId;delete query.api;var protocol='https:';var domain=this._domain;var endpoint='/delegation';var url=joinUrl(protocol,domain,endpoint);if(this._useJSONP){return jsonp(url+'?'+qs.stringify(query),jsonpOpts,function(err,resp){if(err){return callback(err);}if('error'in resp){var error=new LoginError(resp.status,resp.error_description||resp.error);return callback(error);}callback(null,resp);});}reqwest({url:same_origin(protocol,domain)?endpoint:url,method:'post',type:'json',data:query,crossOrigin:!same_origin(protocol,domain),success:function(resp){callback(null,resp);},error:function(err){try{callback(JSON.parse(err.responseText));}catch(e){var er=err;var isAffectedIEVersion=isInternetExplorer()===10||isInternetExplorer()===11;var zeroStatus=(!er.status||er.status===0);if(zeroStatus&&!window.navigator.onLine){er={};er.status=0;er.responseText={code:'offline'};}else if(zeroStatus&&isAffectedIEVersion){er={};er.status=401;er.responseText={code:'invalid_operation'};}else if(zeroStatus){er={};er.status=0;er.responseText={code:'connection_refused_timeout'};}else{er.responseText=err;}callback(new LoginError(er.status,er.responseText));}}});};Auth0.prototype.logout=function(query){var url=joinUrl('https:',this._domain,'/logout');if(query){url+='?'+qs.stringify(query);}this._redirect(url);};Auth0.prototype.getSSOData=function(withActiveDirectories,callback){if(typeof withActiveDirectories==='function'){callback=withActiveDirectories;withActiveDirectories=false;}var url=joinUrl('https:',this._domain,'/user/ssodata');if(withActiveDirectories){url+='?'+qs.stringify({ldaps:1,client_id:this._clientID});}var jsonpOptions=xtend({},jsonpOpts,{timeout:3000});return jsonp(url,jsonpOptions,function(err,resp){callback(null,err?{sso:false}:resp);});};Auth0.prototype.getConnections=function(callback){return jsonp('https://'+this._domain+'/public/api/'+this._clientID+'/connections',jsonpOpts,callback);};Auth0.prototype.startPasswordless=function(options,callback){if('object'!==typeof options){throw new Error('An options object is required');}if('function'!==typeof callback){throw new Error('A callback function is required');}if(!options.email&&!options.phoneNumber){throw new Error('An `email` or a `phoneNumber` is required.');}var protocol='https:';var domain=this._domain;var endpoint='/passwordless/start';var url=joinUrl(protocol,domain,endpoint);var data={client_id:this._clientID};if(options.email){data.email=options.email;data.connection='email';if(options.authParams){data.authParams=options.authParams;}if(!options.send||options.send==="link"){if(!data.authParams){data.authParams={};}data.authParams.redirect_uri=this._callbackURL;data.authParams.response_type=this._shouldRedirect&&!this._callbackOnLocationHash?"code":"token";}if(options.send){data.send=options.send;}}else{data.phone_number=options.phoneNumber;data.connection='sms';}if(this._useJSONP){if(this._sendClientInfo){data['auth0Client']=this._getClientInfoString();}return jsonp(url+'?'+qs.stringify(data),jsonpOpts,function(err,resp){if(err){return callback(new Error(0+': '+err.toString()));}return resp.status===200?callback(null,true):callback(resp.err||resp.error);});}return reqwest({url:same_origin(protocol,domain)?endpoint:url,method:'post',type:'json',headers:this._getClientInfoHeader(),crossOrigin:!same_origin(protocol,domain),data:data}).fail(function(err){try{callback(JSON.parse(err.responseText));}catch(e){var error=new Error(err.status+'('+err.statusText+'): '+err.responseText);error.statusCode=err.status;error.error=err.statusText;error.message=err.responseText;callback(error);}}).then(function(result){callback(null,result);});};Auth0.prototype.requestMagicLink=function(attrs,cb){return this.startPasswordless(attrs,cb);};Auth0.prototype.requestEmailCode=function(attrs,cb){attrs.send="code";return this.startPasswordless(attrs,cb);};Auth0.prototype.verifyEmailCode=function(attrs,cb){attrs.passcode=attrs.code;delete attrs.code;return this.login(attrs,cb);};Auth0.prototype.requestSMSCode=function(attrs,cb){return this.startPasswordless(attrs,cb);};Auth0.prototype.verifySMSCode=function(attrs,cb){attrs.passcode=attrs.code;delete attrs.code;return this.login(attrs,cb);};module.exports=Auth0;},{"./lib/LoginError":2,"./lib/assert_required":3,"./lib/base64_url":4,"./lib/index-of":5,"./lib/is-array":6,"./lib/json-parse":7,"./lib/same-origin":8,"./lib/use_jsonp":9,"./version.json":27,"jsonp":15,"qs":16,"reqwest":17,"trim":18,"winchan":19,"xtend":21}],2:[function(require,module,exports){var json_parse=require('./json-parse');module.exports=LoginError;function LoginError(status,details){var obj;if(typeof details=='string'){try{obj=json_parse(details);}catch(er){obj={message:details};}}else{obj=details||{description:'server error'};}if(!obj.code){obj.code=obj.error;}if('unauthorized'===obj.code){status=401;}var message=obj.description||obj.message||obj.error;if('PasswordStrengthError'===obj.name){message="Password is not strong enough.";}var err=Error.call(this,message);err.status=status;err.name=obj.code;err.code=obj.code;err.details=obj;if(status===0){if(!err.code||err.code!=='offline'){err.code='Unknown';err.message='Unknown error.';}}return err;}if(Object&&Object.create){LoginError.prototype=Object.create(Error.prototype,{constructor:{value:LoginError}});}},{"./json-parse":7}],3:[function(require,module,exports){module.exports=required;function required(obj,prop){if(!obj[prop]){throw new Error(prop+' is required.');}}},{}],4:[function(require,module,exports){var Base64=require('Base64');module.exports={encode:encode,decode:decode};function encode(str){return Base64.btoa(str).replace(/\+/g,'-').replace(/\//g,'_').replace(/=+$/,'');}function decode(str){str+=Array(5-str.length%4).join('=');str=str.replace(/\-/g,'+').replace(/\_/g,'/');return Base64.atob(str);}},{"Base64":10}],5:[function(require,module,exports){module.exports=Array.prototype.indexOf?nativeIndexOf:polyfillIndexOf;function nativeIndexOf(array,searchElement,fromIndex){return array.indexOf(searchElement,fromIndex);}function polyfillIndexOf(array,searchElement,fromIndex){var k;if(array==null){throw new TypeError('"array" is null or not defined');}var O=Object(array);var len=O.length>>>0;if(len===0){return-1;}var n=+fromIndex||0;if(Math.abs(n)===Infinity){n=0;}if(n>=len){return-1;}k=Math.max(n>=0?n:len-Math.abs(n),0);while(k<len){if(k in O&&O[k]===searchElement){return k;}k++;}return-1;};},{}],6:[function(require,module,exports){var toString=Object.prototype.toString;module.exports=null!=Array.isArray?Array.isArray:isArray;function isArray(array){return toString.call(array)==='[object Array]';};},{}],7:[function(require,module,exports){module.exports='undefined'===typeof window.JSON?require('json-fallback').parse:window.JSON.parse;},{"json-fallback":14}],8:[function(require,module,exports){var protocol=window.location.protocol;var domain=window.location.hostname;var port=window.location.port;module.exports=same_origin;function same_origin(tprotocol,tdomain,tport){tport=tport||'';return protocol===tprotocol&&domain===tdomain&&port===tport;}},{}],9:[function(require,module,exports){module.exports=use_jsonp;function use_jsonp(){var xhr=window.XMLHttpRequest?new XMLHttpRequest():null;if(xhr&&'withCredentials'in xhr){return false;}return true;}},{}],10:[function(require,module,exports){;(function(){var
object=typeof exports!='undefined'?exports:this,chars='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=',INVALID_CHARACTER_ERR=(function(){try{document.createElement('$');}catch(error){return error;}}());object.btoa||(object.btoa=function(input){for(var block,charCode,idx=0,map=chars,output='';input.charAt(idx|0)||(map='=',idx%1);output+=map.charAt(63&block>>8-idx%1*8)){charCode=input.charCodeAt(idx+=3/4);if(charCode>0xFF)throw INVALID_CHARACTER_ERR;block=block<<8|charCode;}return output;});object.atob||(object.atob=function(input){input=input.replace(/=+$/,'')
if(input.length%4==1)throw INVALID_CHARACTER_ERR;for(var bc=0,bs,buffer,idx=0,output='';buffer=input.charAt(idx++);~buffer&&(bs=bc%4?bs*64+buffer:buffer,bc++%4)?output+=String.fromCharCode(255&bs>>(-2*bc&6)):0){buffer=chars.indexOf(buffer);}return output;});}());},{}],11:[function(require,module,exports){exports=module.exports=require('./debug');exports.log=log;exports.formatArgs=formatArgs;exports.save=save;exports.load=load;exports.useColors=useColors;exports.colors=['lightseagreen','forestgreen','goldenrod','dodgerblue','darkorchid','crimson'];function useColors(){return('WebkitAppearance'in document.documentElement.style)||(window.console&&(console.firebug||(console.exception&&console.table)))||(navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31);}exports.formatters.j=function(v){return JSON.stringify(v);};function formatArgs(){var args=arguments;var useColors=this.useColors;args[0]=(useColors?'%c':'')+this.namespace+(useColors?' %c':' ')+args[0]+(useColors?'%c ':' ')+'+'+exports.humanize(this.diff);if(!useColors)return args;var c='color: '+this.color;args=[args[0],c,'color: inherit'].concat(Array.prototype.slice.call(args,1));var index=0;var lastC=0;args[0].replace(/%[a-z%]/g,function(match){if('%%'===match)return;index++;if('%c'===match){lastC=index;}});args.splice(lastC,0,c);return args;}function log(){return'object'==typeof console&&'function'==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments);}function save(namespaces){try{if(null==namespaces){localStorage.removeItem('debug');}else{localStorage.debug=namespaces;}}catch(e){}}function load(){var r;try{r=localStorage.debug;}catch(e){}return r;}exports.enable(load());},{"./debug":12}],12:[function(require,module,exports){exports=module.exports=debug;exports.coerce=coerce;exports.disable=disable;exports.enable=enable;exports.enabled=enabled;exports.humanize=require('ms');exports.names=[];exports.skips=[];exports.formatters={};var prevColor=0;var prevTime;function selectColor(){return exports.colors[prevColor++%exports.colors.length];}function debug(namespace){function disabled(){}disabled.enabled=false;function enabled(){var self=enabled;var curr=+new Date();var ms=curr-(prevTime||curr);self.diff=ms;self.prev=prevTime;self.curr=curr;prevTime=curr;if(null==self.useColors)self.useColors=exports.useColors();if(null==self.color&&self.useColors)self.color=selectColor();var args=Array.prototype.slice.call(arguments);args[0]=exports.coerce(args[0]);if('string'!==typeof args[0]){args=['%o'].concat(args);}var index=0;args[0]=args[0].replace(/%([a-z%])/g,function(match,format){if(match==='%%')return match;index++;var formatter=exports.formatters[format];if('function'===typeof formatter){var val=args[index];match=formatter.call(self,val);args.splice(index,1);index--;}return match;});if('function'===typeof exports.formatArgs){args=exports.formatArgs.apply(self,args);}var logFn=enabled.log||exports.log||console.log.bind(console);logFn.apply(self,args);}enabled.enabled=true;var fn=exports.enabled(namespace)?enabled:disabled;fn.namespace=namespace;return fn;}function enable(namespaces){exports.save(namespaces);var split=(namespaces||'').split(/[\s,]+/);var len=split.length;for(var i=0;i<len;i++){if(!split[i])continue;namespaces=split[i].replace(/\*/g,'.*?');if(namespaces[0]==='-'){exports.skips.push(new RegExp('^'+namespaces.substr(1)+'$'));}else{exports.names.push(new RegExp('^'+namespaces+'$'));}}}function disable(){exports.enable('');}function enabled(name){var i,len;for(i=0,len=exports.skips.length;i<len;i++){if(exports.skips[i].test(name)){return false;}}for(i=0,len=exports.names.length;i<len;i++){if(exports.names[i].test(name)){return true;}}return false;}function coerce(val){if(val instanceof Error)return val.stack||val.message;return val;}},{"ms":13}],13:[function(require,module,exports){var s=1000;var m=s*60;var h=m*60;var d=h*24;var y=d*365.25;module.exports=function(val,options){options=options||{};if('string'==typeof val)return parse(val);return options.long?long(val):short(val);};function parse(str){var match=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(str);if(!match)return;var n=parseFloat(match[1]);var type=(match[2]||'ms').toLowerCase();switch(type){case'years':case'year':case'y':return n*y;case'days':case'day':case'd':return n*d;case'hours':case'hour':case'h':return n*h;case'minutes':case'minute':case'm':return n*m;case'seconds':case'second':case's':return n*s;case'ms':return n;}}function short(ms){if(ms>=d)return Math.round(ms/d)+'d';if(ms>=h)return Math.round(ms/h)+'h';if(ms>=m)return Math.round(ms/m)+'m';if(ms>=s)return Math.round(ms/s)+'s';return ms+'ms';}function long(ms){return plural(ms,d,'day')||plural(ms,h,'hour')||plural(ms,m,'minute')||plural(ms,s,'second')||ms+' ms';}function plural(ms,n,name){if(ms<n)return;if(ms<n*1.5)return Math.floor(ms/n)+' '+name;return Math.ceil(ms/n)+' '+name+'s';}},{}],14:[function(require,module,exports){var JSON={};(function(){'use strict';function f(n){return n<10?'0'+n:n;}if(typeof Date.prototype.toJSON!=='function'){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+f(this.getUTCMonth()+1)+'-'+f(this.getUTCDate())+'T'+f(this.getUTCHours())+':'+f(this.getUTCMinutes())+':'+f(this.getUTCSeconds())+'Z':null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==='string'?c:'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==='object'&&typeof value.toJSON==='function'){value=value.toJSON(key);}if(typeof rep==='function'){value=rep.call(holder,key,value);}switch(typeof value){case'string':return quote(value);case'number':return isFinite(value)?String(value):'null';case'boolean':case'null':return String(value);case'object':if(!value){return'null';}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==='[object Array]'){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||'null';}v=partial.length===0?'[]':gap?'[\n'+gap+partial.join(',\n'+gap)+'\n'+mind+']':'['+partial.join(',')+']';gap=mind;return v;}if(rep&&typeof rep==='object'){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==='string'){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}v=partial.length===0?'{}':gap?'{\n'+gap+partial.join(',\n'+gap)+'\n'+mind+'}':'{'+partial.join(',')+'}';gap=mind;return v;}}if(typeof JSON.stringify!=='function'){JSON.stringify=function(value,replacer,space){var i;gap='';indent='';if(typeof space==='number'){for(i=0;i<space;i+=1){indent+=' ';}}else if(typeof space==='string'){indent=space;}rep=replacer;if(replacer&&typeof replacer!=='function'&&(typeof replacer!=='object'||typeof replacer.length!=='number')){throw new Error('JSON.stringify');}return str('',{'':value});};}if(typeof JSON.parse!=='function'){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==='object'){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}return reviver.call(holder,key,value);}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);});}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof reviver==='function'?walk({'':j},''):j;}throw new SyntaxError('JSON.parse');};}}());module.exports=JSON},{}],15:[function(require,module,exports){var debug=require('debug')('jsonp');module.exports=jsonp;var count=0;function noop(){}function jsonp(url,opts,fn){if('function'==typeof opts){fn=opts;opts={};}if(!opts)opts={};var prefix=opts.prefix||'__jp';var param=opts.param||'callback';var timeout=null!=opts.timeout?opts.timeout:60000;var enc=encodeURIComponent;var target=document.getElementsByTagName('script')[0]||document.head;var script;var timer;var id=prefix+(count++);if(timeout){timer=setTimeout(function(){cleanup();if(fn)fn(new Error('Timeout'));},timeout);}function cleanup(){script.parentNode.removeChild(script);window[id]=noop;}window[id]=function(data){debug('jsonp got',data);if(timer)clearTimeout(timer);cleanup();if(fn)fn(null,data);};url+=(~url.indexOf('?')?'&':'?')+param+'='+enc(id);url=url.replace('?&','?');debug('jsonp req "%s"',url);script=document.createElement('script');script.src=url;target.parentNode.insertBefore(script,target);}},{"debug":11}],16:[function(require,module,exports){var toString=Object.prototype.toString;var hasOwnProperty=Object.prototype.hasOwnProperty;var indexOf=typeof Array.prototype.indexOf==='function'?function(arr,el){return arr.indexOf(el);}:function(arr,el){if(typeof arr=='string'&&typeof"a"[0]=='undefined'){arr=arr.split('');}for(var i=0;i<arr.length;i++){if(arr[i]===el)return i;}return-1;};var isArray=Array.isArray||function(arr){return toString.call(arr)=='[object Array]';};var objectKeys=Object.keys||function(obj){var ret=[];for(var key in obj){if(obj.hasOwnProperty(key)){ret.push(key);}}return ret;};var forEach=typeof Array.prototype.forEach==='function'?function(arr,fn){return arr.forEach(fn);}:function(arr,fn){for(var i=0;i<arr.length;i++)fn(arr[i]);};var reduce=function(arr,fn,initial){if(typeof arr.reduce==='function')return arr.reduce(fn,initial);var res=initial;for(var i=0;i<arr.length;i++)res=fn(res,arr[i]);return res;};var isint=/^[0-9]+$/;function promote(parent,key){if(parent[key].length==0)return parent[key]={}
var t={};for(var i in parent[key]){if(hasOwnProperty.call(parent[key],i)){t[i]=parent[key][i];}}parent[key]=t;return t;}function parse(parts,parent,key,val){var part=parts.shift();if(hasOwnProperty.call(Object.prototype,key))return;if(!part){if(isArray(parent[key])){parent[key].push(val);}else if('object'==typeof parent[key]){parent[key]=val;}else if('undefined'==typeof parent[key]){parent[key]=val;}else{parent[key]=[parent[key],val];}}else{var obj=parent[key]=parent[key]||[];if(']'==part){if(isArray(obj)){if(''!=val)obj.push(val);}else if('object'==typeof obj){obj[objectKeys(obj).length]=val;}else{obj=parent[key]=[parent[key],val];}}else if(~indexOf(part,']')){part=part.substr(0,part.length-1);if(!isint.test(part)&&isArray(obj))obj=promote(parent,key);parse(parts,obj,part,val);}else{if(!isint.test(part)&&isArray(obj))obj=promote(parent,key);parse(parts,obj,part,val);}}}function merge(parent,key,val){if(~indexOf(key,']')){var parts=key.split('['),len=parts.length,last=len-1;parse(parts,parent,'base',val);}else{if(!isint.test(key)&&isArray(parent.base)){var t={};for(var k in parent.base)t[k]=parent.base[k];parent.base=t;}set(parent.base,key,val);}return parent;}function compact(obj){if('object'!=typeof obj)return obj;if(isArray(obj)){var ret=[];for(var i in obj){if(hasOwnProperty.call(obj,i)){ret.push(obj[i]);}}return ret;}for(var key in obj){obj[key]=compact(obj[key]);}return obj;}function parseObject(obj){var ret={base:{}};forEach(objectKeys(obj),function(name){merge(ret,name,obj[name]);});return compact(ret.base);}function parseString(str,options){var ret=reduce(String(str).split(options.separator),function(ret,pair){var eql=indexOf(pair,'='),brace=lastBraceInKey(pair),key=pair.substr(0,brace||eql),val=pair.substr(brace||eql,pair.length),val=val.substr(indexOf(val,'=')+1,val.length);if(''==key)key=pair,val='';if(''==key)return ret;return merge(ret,decode(key),decode(val));},{base:{}}).base;return compact(ret);}exports.parse=function(str,options){if(null==str||''==str)return{};options=options||{};options.separator=options.separator||'&';return'object'==typeof str?parseObject(str):parseString(str,options);};var stringify=exports.stringify=function(obj,prefix){if(isArray(obj)){return stringifyArray(obj,prefix);}else if('[object Object]'==toString.call(obj)){return stringifyObject(obj,prefix);}else if('string'==typeof obj){return stringifyString(obj,prefix);}else{return prefix+'='+encodeURIComponent(String(obj));}};function stringifyString(str,prefix){if(!prefix)throw new TypeError('stringify expects an object');return prefix+'='+encodeURIComponent(str);}function stringifyArray(arr,prefix){var ret=[];if(!prefix)throw new TypeError('stringify expects an object');for(var i=0;i<arr.length;i++){ret.push(stringify(arr[i],prefix+'['+i+']'));}return ret.join('&');}function stringifyObject(obj,prefix){var ret=[],keys=objectKeys(obj),key;for(var i=0,len=keys.length;i<len;++i){key=keys[i];if(''==key)continue;if(null==obj[key]){ret.push(encodeURIComponent(key)+'=');}else{ret.push(stringify(obj[key],prefix?prefix+'['+encodeURIComponent(key)+']':encodeURIComponent(key)));}}return ret.join('&');}function set(obj,key,val){var v=obj[key];if(hasOwnProperty.call(Object.prototype,key))return;if(undefined===v){obj[key]=val;}else if(isArray(v)){v.push(val);}else{obj[key]=[v,val];}}function lastBraceInKey(str){var len=str.length,brace,c;for(var i=0;i<len;++i){c=str[i];if(']'==c)brace=false;if('['==c)brace=true;if('='==c&&!brace)return i;}}function decode(str){try{return decodeURIComponent(str.replace(/\+/g,' '));}catch(err){return str;}}},{}],17:[function(require,module,exports){!function(name,context,definition){if(typeof module!='undefined'&&module.exports)module.exports=definition()
else if(typeof define=='function'&&define.amd)define(definition)
else context[name]=definition()}('reqwest',this,function(){var win=window,doc=document,httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,byTag='getElementsByTagName',readyState='readyState',contentType='Content-Type',requestedWith='X-Requested-With',head=doc[byTag]('head')[0],uniqid=0,callbackPrefix='reqwest_'+(+new Date()),lastValue,xmlHttpRequest='XMLHttpRequest',xDomainRequest='XDomainRequest',noop=function(){},isArray=typeof Array.isArray=='function'?Array.isArray:function(a){return a instanceof Array},defaultHeaders={'contentType':'application/x-www-form-urlencoded','requestedWith':xmlHttpRequest,'accept':{'*':'text/javascript, text/html, application/xml, text/xml, */*','xml':'application/xml, text/xml','html':'text/html','text':'text/plain','json':'application/json, text/javascript','js':'application/javascript, text/javascript'}},xhr=function(o){if(o['crossOrigin']===true){var xhr=win[xmlHttpRequest]?new XMLHttpRequest():null
if(xhr&&'withCredentials'in xhr){return xhr}else if(win[xDomainRequest]){return new XDomainRequest()}else{throw new Error('Browser does not support cross-origin requests')}}else if(win[xmlHttpRequest]){return new XMLHttpRequest()}else{return new ActiveXObject('Microsoft.XMLHTTP')}},globalSetupOptions={dataFilter:function(data){return data}}
function succeed(r){var protocol=protocolRe.exec(r.url);protocol=(protocol&&protocol[1])||window.location.protocol;return httpsRe.test(protocol)?twoHundo.test(r.request.status):!!r.request.response;}function handleReadyState(r,success,error){return function(){if(r._aborted)return error(r.request)
if(r._timedOut)return error(r.request,'Request is aborted: timeout')
if(r.request&&r.request[readyState]==4){r.request.onreadystatechange=noop
if(succeed(r))success(r.request)
else
error(r.request)}}}function setHeaders(http,o){var headers=o['headers']||{},h
headers['Accept']=headers['Accept']||defaultHeaders['accept'][o['type']]||defaultHeaders['accept']['*']
var isAFormData=typeof FormData==='function'&&(o['data']instanceof FormData);if(!o['crossOrigin']&&!headers[requestedWith])headers[requestedWith]=defaultHeaders['requestedWith']
if(!headers[contentType]&&!isAFormData)headers[contentType]=o['contentType']||defaultHeaders['contentType']
for(h in headers)headers.hasOwnProperty(h)&&'setRequestHeader'in http&&http.setRequestHeader(h,headers[h])}function setCredentials(http,o){if(typeof o['withCredentials']!=='undefined'&&typeof http.withCredentials!=='undefined'){http.withCredentials=!!o['withCredentials']}}function generalCallback(data){lastValue=data}function urlappend(url,s){return url+(/\?/.test(url)?'&':'?')+s}function handleJsonp(o,fn,err,url){var reqId=uniqid++,cbkey=o['jsonpCallback']||'callback',cbval=o['jsonpCallbackName']||reqwest.getcallbackPrefix(reqId),cbreg=new RegExp('((^|\\?|&)'+cbkey+')=([^&]+)'),match=url.match(cbreg),script=doc.createElement('script'),loaded=0,isIE10=navigator.userAgent.indexOf('MSIE 10.0')!==-1
if(match){if(match[3]==='?'){url=url.replace(cbreg,'$1='+cbval)}else{cbval=match[3]}}else{url=urlappend(url,cbkey+'='+cbval)}win[cbval]=generalCallback
script.type='text/javascript'
script.src=url
script.async=true
if(typeof script.onreadystatechange!=='undefined'&&!isIE10){script.htmlFor=script.id='_reqwest_'+reqId}script.onload=script.onreadystatechange=function(){if((script[readyState]&&script[readyState]!=='complete'&&script[readyState]!=='loaded')||loaded){return false}script.onload=script.onreadystatechange=null
script.onclick&&script.onclick()
fn(lastValue)
lastValue=undefined
head.removeChild(script)
loaded=1}
head.appendChild(script)
return{abort:function(){script.onload=script.onreadystatechange=null
err({},'Request is aborted: timeout',{})
lastValue=undefined
head.removeChild(script)
loaded=1}}}function getRequest(fn,err){var o=this.o,method=(o['method']||'GET').toUpperCase(),url=typeof o==='string'?o:o['url'],data=(o['processData']!==false&&o['data']&&typeof o['data']!=='string')?reqwest.toQueryString(o['data']):(o['data']||null),http,sendWait=false
if((o['type']=='jsonp'||method=='GET')&&data){url=urlappend(url,data)
data=null}if(o['type']=='jsonp')return handleJsonp(o,fn,err,url)
http=(o.xhr&&o.xhr(o))||xhr(o)
http.open(method,url,o['async']===false?false:true)
setHeaders(http,o)
setCredentials(http,o)
if(win[xDomainRequest]&&http instanceof win[xDomainRequest]){http.onload=fn
http.onerror=err
http.onprogress=function(){}
sendWait=true}else{http.onreadystatechange=handleReadyState(this,fn,err)}o['before']&&o['before'](http)
if(sendWait){setTimeout(function(){http.send(data)},200)}else{http.send(data)}return http}function Reqwest(o,fn){this.o=o
this.fn=fn
init.apply(this,arguments)}function setType(header){if(header.match('json'))return'json'
if(header.match('javascript'))return'js'
if(header.match('text'))return'html'
if(header.match('xml'))return'xml'}function init(o,fn){this.url=typeof o=='string'?o:o['url']
this.timeout=null
this._fulfilled=false
this._successHandler=function(){}
this._fulfillmentHandlers=[]
this._errorHandlers=[]
this._completeHandlers=[]
this._erred=false
this._responseArgs={}
var self=this
fn=fn||function(){}
if(o['timeout']){this.timeout=setTimeout(function(){timedOut()},o['timeout'])}if(o['success']){this._successHandler=function(){o['success'].apply(o,arguments)}}if(o['error']){this._errorHandlers.push(function(){o['error'].apply(o,arguments)})}if(o['complete']){this._completeHandlers.push(function(){o['complete'].apply(o,arguments)})}function complete(resp){o['timeout']&&clearTimeout(self.timeout)
self.timeout=null
while(self._completeHandlers.length>0){self._completeHandlers.shift()(resp)}}function success(resp){var type=o['type']||resp&&setType(resp.getResponseHeader('Content-Type'))
resp=(type!=='jsonp')?self.request:resp
var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse
try{resp.responseText=r}catch(e){}if(r){switch(type){case'json':try{resp=win.JSON?win.JSON.parse(r):eval('('+r+')')}catch(err){return error(resp,'Could not parse JSON in response',err)}break
case'js':resp=eval(r)
break
case'html':resp=r
break
case'xml':resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML
break}}self._responseArgs.resp=resp
self._fulfilled=true
fn(resp)
self._successHandler(resp)
while(self._fulfillmentHandlers.length>0){resp=self._fulfillmentHandlers.shift()(resp)}complete(resp)}function timedOut(){self._timedOut=true
self.request.abort()}function error(resp,msg,t){resp=self.request
self._responseArgs.resp=resp
self._responseArgs.msg=msg
self._responseArgs.t=t
self._erred=true
while(self._errorHandlers.length>0){self._errorHandlers.shift()(resp,msg,t)}complete(resp)}this.request=getRequest.call(this,success,error)}Reqwest.prototype={abort:function(){this._aborted=true
this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(success,fail){success=success||function(){}
fail=fail||function(){}
if(this._fulfilled){this._responseArgs.resp=success(this._responseArgs.resp)}else if(this._erred){fail(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t)}else{this._fulfillmentHandlers.push(success)
this._errorHandlers.push(fail)}return this},always:function(fn){if(this._fulfilled||this._erred){fn(this._responseArgs.resp)}else{this._completeHandlers.push(fn)}return this},fail:function(fn){if(this._erred){fn(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t)}else{this._errorHandlers.push(fn)}return this},'catch':function(fn){return this.fail(fn)}}
function reqwest(o,fn){return new Reqwest(o,fn)}function normalize(s){return s?s.replace(/\r?\n/g,'\r\n'):''}function serial(el,cb){var n=el.name,t=el.tagName.toLowerCase(),optCb=function(o){if(o&&!o['disabled'])cb(n,normalize(o['attributes']['value']&&o['attributes']['value']['specified']?o['value']:o['text']))},ch,ra,val,i
if(el.disabled||!n)return
switch(t){case'input':if(!/reset|button|image|file/i.test(el.type)){ch=/checkbox/i.test(el.type)
ra=/radio/i.test(el.type)
val=el.value;(!(ch||ra)||el.checked)&&cb(n,normalize(ch&&val===''?'on':val))}break
case'textarea':cb(n,normalize(el.value))
break
case'select':if(el.type.toLowerCase()==='select-one'){optCb(el.selectedIndex>=0?el.options[el.selectedIndex]:null)}else{for(i=0;el.length&&i<el.length;i++){el.options[i].selected&&optCb(el.options[i])}}break}}function eachFormElement(){var cb=this,e,i,serializeSubtags=function(e,tags){var i,j,fa
for(i=0;i<tags.length;i++){fa=e[byTag](tags[i])
for(j=0;j<fa.length;j++)serial(fa[j],cb)}}
for(i=0;i<arguments.length;i++){e=arguments[i]
if(/input|select|textarea/i.test(e.tagName))serial(e,cb)
serializeSubtags(e,['input','select','textarea'])}}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var hash={}
eachFormElement.apply(function(name,value){if(name in hash){hash[name]&&!isArray(hash[name])&&(hash[name]=[hash[name]])
hash[name].push(value)}else hash[name]=value},arguments)
return hash}reqwest.serializeArray=function(){var arr=[]
eachFormElement.apply(function(name,value){arr.push({name:name,value:value})},arguments)
return arr}
reqwest.serialize=function(){if(arguments.length===0)return''
var opt,fn,args=Array.prototype.slice.call(arguments,0)
opt=args.pop()
opt&&opt.nodeType&&args.push(opt)&&(opt=null)
opt&&(opt=opt.type)
if(opt=='map')fn=serializeHash
else if(opt=='array')fn=reqwest.serializeArray
else fn=serializeQueryString
return fn.apply(null,args)}
reqwest.toQueryString=function(o,trad){var prefix,i,traditional=trad||false,s=[],enc=encodeURIComponent,add=function(key,value){value=('function'===typeof value)?value():(value==null?'':value)
s[s.length]=enc(key)+'='+enc(value)}
if(isArray(o)){for(i=0;o&&i<o.length;i++)add(o[i]['name'],o[i]['value'])}else{for(prefix in o){if(o.hasOwnProperty(prefix))buildParams(prefix,o[prefix],traditional,add)}}return s.join('&').replace(/%20/g,'+')}
function buildParams(prefix,obj,traditional,add){var name,i,v,rbracket=/\[\]$/
if(isArray(obj)){for(i=0;obj&&i<obj.length;i++){v=obj[i]
if(traditional||rbracket.test(prefix)){add(prefix,v)}else{buildParams(prefix+'['+(typeof v==='object'?i:'')+']',v,traditional,add)}}}else if(obj&&obj.toString()==='[object Object]'){for(name in obj){buildParams(prefix+'['+name+']',obj[name],traditional,add)}}else{add(prefix,obj)}}reqwest.getcallbackPrefix=function(){return callbackPrefix}
reqwest.compat=function(o,fn){if(o){o['type']&&(o['method']=o['type'])&&delete o['type']
o['dataType']&&(o['type']=o['dataType'])
o['jsonpCallback']&&(o['jsonpCallbackName']=o['jsonpCallback'])&&delete o['jsonpCallback']
o['jsonp']&&(o['jsonpCallback']=o['jsonp'])}return new Reqwest(o,fn)}
reqwest.ajaxSetup=function(options){options=options||{}
for(var k in options){globalSetupOptions[k]=options[k]}}
return reqwest});},{}],18:[function(require,module,exports){exports=module.exports=trim;function trim(str){return str.replace(/^\s*|\s*$/g,'');}exports.left=function(str){return str.replace(/^\s*/,'');};exports.right=function(str){return str.replace(/\s*$/,'');};},{}],19:[function(require,module,exports){var WinChan=(function(){var RELAY_FRAME_NAME="__winchan_relay_frame";var CLOSE_CMD="die";function addListener(w,event,cb){if(w.attachEvent)w.attachEvent('on'+event,cb);else if(w.addEventListener)w.addEventListener(event,cb,false);}function removeListener(w,event,cb){if(w.detachEvent)w.detachEvent('on'+event,cb);else if(w.removeEventListener)w.removeEventListener(event,cb,false);}function isInternetExplorer(){var rv=-1;var ua=navigator.userAgent;if(navigator.appName==='Microsoft Internet Explorer'){var re=new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");if(re.exec(ua)!=null)rv=parseFloat(RegExp.$1);}else if(ua.indexOf("Trident")>-1){var re=new RegExp("rv:([0-9]{2,2}[\.0-9]{0,})");if(re.exec(ua)!==null){rv=parseFloat(RegExp.$1);}}return rv>=8;}function isFennec(){try{var userAgent=navigator.userAgent;return(userAgent.indexOf('Fennec/')!=-1)||(userAgent.indexOf('Firefox/')!=-1&&userAgent.indexOf('Android')!=-1);}catch(e){}return false;}function isSupported(){return(window.JSON&&window.JSON.stringify&&window.JSON.parse&&window.postMessage);}function extractOrigin(url){if(!/^https?:\/\//.test(url))url=window.location.href;var m=/^(https?:\/\/[\-_a-zA-Z\.0-9:]+)/.exec(url);if(m)return m[1];return url;}function findRelay(){var loc=window.location;var frames=window.opener.frames;for(var i=frames.length-1;i>=0;i--){try{if(frames[i].location.protocol===window.location.protocol&&frames[i].location.host===window.location.host&&frames[i].name===RELAY_FRAME_NAME){return frames[i];}}catch(e){}}return;}var isIE=isInternetExplorer();if(isSupported()){return{open:function(opts,cb){if(!cb)throw"missing required callback argument";var err;if(!opts.url)err="missing required 'url' parameter";if(!opts.relay_url)err="missing required 'relay_url' parameter";if(err)setTimeout(function(){cb(err);},0);if(!opts.window_name)opts.window_name=null;if(!opts.window_features||isFennec())opts.window_features=undefined;var iframe;var origin=extractOrigin(opts.url);if(origin!==extractOrigin(opts.relay_url)){return setTimeout(function(){cb('invalid arguments: origin of url and relay_url must match');},0);}var messageTarget;if(isIE){iframe=document.createElement("iframe");iframe.setAttribute('src',opts.relay_url);iframe.style.display="none";iframe.setAttribute('name',RELAY_FRAME_NAME);document.body.appendChild(iframe);messageTarget=iframe.contentWindow;}var w=opts.popup||window.open(opts.url,opts.window_name,opts.window_features);if(opts.popup){w.location.href=opts.url;}if(!messageTarget)messageTarget=w;var closeInterval=setInterval(function(){if(w&&w.closed){cleanup();if(cb){cb('User closed the popup window');cb=null;}}},500);var req=JSON.stringify({a:'request',d:opts.params});function cleanup(){if(iframe)document.body.removeChild(iframe);iframe=undefined;if(closeInterval)closeInterval=clearInterval(closeInterval);removeListener(window,'message',onMessage);removeListener(window,'unload',cleanup);if(w){try{w.close();}catch(securityViolation){messageTarget.postMessage(CLOSE_CMD,origin);}}w=messageTarget=undefined;}addListener(window,'unload',cleanup);function onMessage(e){if(e.origin!==origin){return;}try{var d=JSON.parse(e.data);if(d.a==='ready')messageTarget.postMessage(req,origin);else if(d.a==='error'){cleanup();if(cb){cb(d.d);cb=null;}}else if(d.a==='response'){cleanup();if(cb){cb(null,d.d);cb=null;}}}catch(err){}}addListener(window,'message',onMessage);return{close:cleanup,focus:function(){if(w){try{w.focus();}catch(e){}}}};},onOpen:function(cb){var o="*";var msgTarget=isIE?findRelay():window.opener;if(!msgTarget)throw"can't find relay frame";function doPost(msg){msg=JSON.stringify(msg);if(isIE)msgTarget.doPost(msg,o);else msgTarget.postMessage(msg,o);}function onMessage(e){var d;try{d=JSON.parse(e.data);}catch(err){}if(!d||d.a!=='request')return;removeListener(window,'message',onMessage);o=e.origin;if(cb){setTimeout(function(){cb(o,d.d,function(r){cb=undefined;doPost({a:'response',d:r});});},0);}}function onDie(e){if(e.data===CLOSE_CMD){try{window.close();}catch(o_O){}}}addListener(isIE?msgTarget:window,'message',onMessage);addListener(isIE?msgTarget:window,'message',onDie);try{doPost({a:"ready"});}catch(e){addListener(msgTarget,'load',function(e){doPost({a:"ready"});});}var onUnload=function(){try{removeListener(isIE?msgTarget:window,'message',onDie);}catch(ohWell){}if(cb)doPost({a:'error',d:'client closed window'});cb=undefined;try{window.close();}catch(e){}};addListener(window,'unload',onUnload);return{detach:function(){removeListener(window,'unload',onUnload);}};}};}else{return{open:function(url,winopts,arg,cb){setTimeout(function(){cb("unsupported browser");},0);},onOpen:function(cb){setTimeout(function(){cb("unsupported browser");},0);}};}})();if(typeof module!=='undefined'&&module.exports){module.exports=WinChan;}},{}],20:[function(require,module,exports){module.exports=hasKeys
function hasKeys(source){return source!==null&&(typeof source==="object"||typeof source==="function")}},{}],21:[function(require,module,exports){var Keys=require("object-keys")
var hasKeys=require("./has-keys")
module.exports=extend
function extend(){var target={}
for(var i=0;i<arguments.length;i++){var source=arguments[i]
if(!hasKeys(source)){continue}var keys=Keys(source)
for(var j=0;j<keys.length;j++){var name=keys[j]
target[name]=source[name]}}return target}},{"./has-keys":20,"object-keys":23}],22:[function(require,module,exports){var hasOwn=Object.prototype.hasOwnProperty;var toString=Object.prototype.toString;var isFunction=function(fn){var isFunc=(typeof fn==='function'&&!(fn instanceof RegExp))||toString.call(fn)==='[object Function]';if(!isFunc&&typeof window!=='undefined'){isFunc=fn===window.setTimeout||fn===window.alert||fn===window.confirm||fn===window.prompt;}return isFunc;};module.exports=function forEach(obj,fn){if(!isFunction(fn)){throw new TypeError('iterator must be a function');}var i,k,isString=typeof obj==='string',l=obj.length,context=arguments.length>2?arguments[2]:null;if(l===+l){for(i=0;i<l;i++){if(context===null){fn(isString?obj.charAt(i):obj[i],i,obj);}else{fn.call(context,isString?obj.charAt(i):obj[i],i,obj);}}}else{for(k in obj){if(hasOwn.call(obj,k)){if(context===null){fn(obj[k],k,obj);}else{fn.call(context,obj[k],k,obj);}}}}};},{}],23:[function(require,module,exports){module.exports=Object.keys||require('./shim');},{"./shim":25}],24:[function(require,module,exports){var toString=Object.prototype.toString;module.exports=function isArguments(value){var str=toString.call(value);var isArguments=str==='[object Arguments]';if(!isArguments){isArguments=str!=='[object Array]'&&value!==null&&typeof value==='object'&&typeof value.length==='number'&&value.length>=0&&toString.call(value.callee)==='[object Function]';}return isArguments;};},{}],25:[function(require,module,exports){(function(){"use strict";var has=Object.prototype.hasOwnProperty,toString=Object.prototype.toString,forEach=require('./foreach'),isArgs=require('./isArguments'),hasDontEnumBug=!({'toString':null}).propertyIsEnumerable('toString'),hasProtoEnumBug=(function(){}).propertyIsEnumerable('prototype'),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],keysShim;keysShim=function keys(object){var isObject=object!==null&&typeof object==='object',isFunction=toString.call(object)==='[object Function]',isArguments=isArgs(object),theKeys=[];if(!isObject&&!isFunction&&!isArguments){throw new TypeError("Object.keys called on a non-object");}if(isArguments){forEach(object,function(value){theKeys.push(value);});}else{var name,skipProto=hasProtoEnumBug&&isFunction;for(name in object){if(!(skipProto&&name==='prototype')&&has.call(object,name)){theKeys.push(name);}}}if(hasDontEnumBug){var ctor=object.constructor,skipConstructor=ctor&&ctor.prototype===object;forEach(dontEnums,function(dontEnum){if(!(skipConstructor&&dontEnum==='constructor')&&has.call(object,dontEnum)){theKeys.push(dontEnum);}});}return theKeys;};module.exports=keysShim;}());},{"./foreach":22,"./isArguments":24}],26:[function(require,module,exports){var global=typeof self!=="undefined"?self:typeof window!=="undefined"?window:{};var Auth0=require('./index');if(typeof global.window.define=='function'&&global.window.define.amd){global.window.define('auth0',function(){return Auth0;});}else if(global.window){global.window.Auth0=Auth0;}},{"./index":1}],27:[function(require,module,exports){module.exports={"version":"6.7.7"}},{}]},{},[26]);